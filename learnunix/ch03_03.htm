<HTML
><HEAD
><TITLE
>[Chapter 3] 3.3 Protecting and Sharing Files</TITLE
><META
NAME="DC.title"
CONTENT="Learning the Unix Operating System"><META
NAME="DC.creator"
CONTENT="Jerry Peek, Grace Todino &amp; John Strang"><META
NAME="DC.publisher"
CONTENT="O'Reilly &amp; Associates, Inc."><META
NAME="DC.date"
CONTENT="1998-08-03T20:50:01Z"><META
NAME="DC.type"
CONTENT="Text.Monograph"><META
NAME="DC.format"
CONTENT="text/html"
SCHEME="MIME"><META
NAME="DC.source"
CONTENT="1-56592-390-1"
SCHEME="ISBN"><META
NAME="DC.language"
CONTENT="en-US"><META
NAME="generator"
CONTENT="Jade 1.1/O'Reilly DocBook 3.0 to HTML 4.0"><LINK
REV="made"
HREF="mailto:online-books@oreilly.com"
TITLE="Online Books Comments"><LINK
REL="up"
HREF="ch03_01.htm"
TITLE="3. Your UNIX Account "><LINK
REL="prev"
HREF="ch03_02.htm"
TITLE="3.2 Looking Inside Files"><LINK
REL="next"
HREF="ch03_04.htm"
TITLE="3.4 Electronic Mail"></HEAD
><BODY
BGCOLOR="#FFFFFF"
TEXT="#000000"
><DIV
CLASS="htmlnav"
><H1
><IMG
SRC="gifs/smbanner.gif"
ALT="Learning the Unix Operating System"
USEMAP="#srchmap"
BORDER="0"></H1
><MAP
NAME="srchmap"
><AREA
SHAPE="RECT"
COORDS="0,0,466,69"
HREF="index.htm"
ALT="Learning the Unix Operating System"><AREA
SHAPE="RECT"
COORDS="467,0,514,18"
HREF="jobjects/fsearch.htm"
ALT="Search this book"></MAP
><TABLE
WIDTH="515"
BORDER="0"
CELLSPACING="0"
CELLPADDING="0"
><TR
><TD
ALIGN="LEFT"
VALIGN="TOP"
WIDTH="172"
><A
CLASS="SECT1"
HREF="ch03_02.htm"
TITLE="3.2 Looking Inside Files"
><IMG
SRC="../gifs/txtpreva.gif"
ALT="Previous: 3.2 Looking Inside Files"
BORDER="0"></A
></TD
><TD
ALIGN="CENTER"
VALIGN="TOP"
WIDTH="171"
><B
><FONT
FACE="ARIEL,HELVETICA,HELV,SANSERIF"
SIZE="-1"
>Chapter 3<BR>Your UNIX Account </FONT
></B
></TD
><TD
ALIGN="RIGHT"
VALIGN="TOP"
WIDTH="172"
><A
CLASS="SECT1"
HREF="ch03_04.htm"
TITLE="3.4 Electronic Mail"
><IMG
SRC="../gifs/txtnexta.gif"
ALT="Next: 3.4 Electronic Mail"
BORDER="0"></A
></TD
></TR
></TABLE
>&nbsp;<HR
ALIGN="LEFT"
WIDTH="515"
TITLE="footer"></DIV
><DIV
CLASS="SECT1"
><H2
CLASS="sect1"
><A
CLASS="title"
NAME="LUX-CH-3-SECT-3"
>3.3 Protecting and Sharing Files</A
></H2
><P
CLASS="para"
><A
CLASS="indexterm"
NAME="LUX-CH-3-IX-FILES-SHARING"
></A
><A
CLASS="indexterm"
NAME="LUX-CH-3-IX-SHARING-FILES"
></A
>UNIX makes it easy for users to share files and directories.
Controlling exactly who has access takes some explaining, though&nbsp;- more
explaining than we can do here.  So here's a cookbook set of
instructions.  If you have critical security needs or you just want
more information, see the references in <A
CLASS="xref"
HREF="appa_01.htm"
TITLE="Reading List "
>Appendix A, Reading List </A
>.</P
><DIV
CLASS="sect2"
><H3
CLASS="sect2"
><A
CLASS="title"
NAME="LUX-CH-3-SECT-3.1"
>3.3.1 Directory Access Permissions</A
></H3
><P
CLASS="para"
><A
CLASS="indexterm"
NAME="AUTOID-2171"
></A
><A
CLASS="indexterm"
NAME="AUTOID-2174"
></A
>A directory's access permissions help to control access to the files
in it.  These affect the overall ability to use files and
subdirectories in the directory.  (Once you have access to a
directory, the ability to read or modify the contents of specific
files is controlled by the file access permissions; see the second of
the following two lists.)</P
><P
CLASS="para"
>In the commands below, replace <EM
CLASS="emphasis"
>dirname</EM
> with the directory's
pathname.
An easy way to change permissions on the working directory is by using its
relative pathname, <B
CLASS="emphasis.bold"
>.</B
> (dot), as in &quot;<B
CLASS="emphasis.bold"
>chmod 755 .</B
>&quot;.<A
CLASS="indexterm"
NAME="LUX-CH-3-IX-CHMOD-COMMAND"
></A
><A
CLASS="indexterm"
NAME="AUTOID-2183"
></A
></P
><UL
CLASS="itemizedlist"
><LI
CLASS="listitem"
><P
CLASS="para"
>To keep yourself from accidentally removing files (or adding or
renaming files) in a directory, use <B
CLASS="emphasis.bold"
>chmod 555</B
> <EM
CLASS="emphasis"
>dirname</EM
>.  To
do the same, but also deny other users any access, use <B
CLASS="emphasis.bold"
>chmod 500</B
>
<EM
CLASS="emphasis"
>dirname</EM
>.</P
></LI
><LI
CLASS="listitem"
><P
CLASS="para"
>To protect the files in a directory and all its subdirectories from
everyone else on your system&nbsp;- but still be able to do anything
<EM
CLASS="emphasis"
>you</EM
> want to dp there&nbsp;- use <B
CLASS="emphasis.bold"
>chmod 700</B
> <EM
CLASS="emphasis"
>dirname</EM
>.</P
></LI
><LI
CLASS="listitem"
><P
CLASS="para"
>To let other people on the system see what's in a directory&nbsp;- and read
or edit the files if the file permissions let them&nbsp;- but not rename,
remove, or add files&nbsp;- use <B
CLASS="emphasis.bold"
>chmod 755</B
> <EM
CLASS="emphasis"
>dirname</EM
>.</P
></LI
><LI
CLASS="listitem"
><P
CLASS="para"
>To let people in your UNIX group add, delete, and rename files in a directory
of yours&nbsp;- and read or edit other people's files if the file permissions let
them&nbsp;- use <B
CLASS="emphasis.bold"
>chmod 775</B
> <EM
CLASS="emphasis"
>dirname</EM
>.</P
></LI
><LI
CLASS="listitem"
><P
CLASS="para"
>To give full access to everyone on the system, use
<B
CLASS="emphasis.bold"
>chmod 777</B
> <EM
CLASS="emphasis"
>dirname</EM
>.</P
></LI
></UL
><P
CLASS="para"
>Remember, to access a directory, a user must also have execute
(<CODE
CLASS="literal"
>x</CODE
>) permission to
all of its parent directories, all the way up to the root.</P
></DIV
><DIV
CLASS="sect2"
><H3
CLASS="sect2"
><A
CLASS="title"
NAME="LUX-CH-3-SECT-3.2"
>3.3.2 File Access Permissions</A
></H3
><P
CLASS="para"
><A
CLASS="indexterm"
NAME="AUTOID-2215"
></A
><A
CLASS="indexterm"
NAME="AUTOID-2218"
></A
>The access permissions on a file control what can be done to the file's
<EM
CLASS="emphasis"
>contents</EM
>.
The access permissions on the <EM
CLASS="emphasis"
>directory</EM
> where the file is kept
control whether the file can
be renamed or removed.</P
><UL
CLASS="itemizedlist"
><LI
CLASS="listitem"
><P
CLASS="para"
>To make a private file that only you can edit, use <B
CLASS="emphasis.bold"
>chmod 600</B
>
<EM
CLASS="emphasis"
>filename</EM
>.
To protect it from accidental editing, use <B
CLASS="emphasis.bold"
>chmod 400</B
> <EM
CLASS="emphasis"
>filename</EM
>.</P
></LI
><LI
CLASS="listitem"
><P
CLASS="para"
>To edit a file yourself, and let everyone else on the system read it
without editing, use <B
CLASS="emphasis.bold"
>chmod 644</B
> <EM
CLASS="emphasis"
>filename</EM
>.</P
></LI
><LI
CLASS="listitem"
><P
CLASS="para"
>To let you and all members of your UNIX group edit a file, but keep any
other user from reading or editing it, use <B
CLASS="emphasis.bold"
>chmod 660</B
> <EM
CLASS="emphasis"
>filename</EM
>.</P
></LI
><LI
CLASS="listitem"
><P
CLASS="para"
>To let nongroup users read but not edit the file, use <B
CLASS="emphasis.bold"
>chmod 664</B
>
<EM
CLASS="emphasis"
>filename</EM
>.</P
></LI
><LI
CLASS="listitem"
><P
CLASS="para"
>To let anyone read or edit the file, use <B
CLASS="emphasis.bold"
>chmod 666</B
> <EM
CLASS="emphasis"
>filename</EM
>.</P
></LI
></UL
><P
CLASS="para"
><A
CLASS="indexterm"
NAME="AUTOID-2247"
></A
></P
></DIV
><DIV
CLASS="sect2"
><H3
CLASS="sect2"
><A
CLASS="title"
NAME="LUX-CH-3-SECT-3.3"
>3.3.3 More Protection Under Linux</A
></H3
><P
CLASS="para"
><A
CLASS="indexterm"
NAME="AUTOID-2251"
></A
><A
CLASS="indexterm"
NAME="AUTOID-2254"
></A
><A
CLASS="indexterm"
NAME="AUTOID-2256"
></A
><A
CLASS="indexterm"
NAME="AUTOID-2259"
></A
>Most Linux systems have a command that gives you more choices on file
and directory protection: <B
CLASS="emphasis.bold"
>chattr</B
>.  <B
CLASS="emphasis.bold"
>chattr</B
> is being
developed, and your version may not have all of the features that it
will have in later versions of Linux.  For instance, <B
CLASS="emphasis.bold"
>chattr</B
> can make
a Linux file <EM
CLASS="emphasis"
>append-only</EM
> (so it can't be overwritten, only added
to); <EM
CLASS="emphasis"
>compressed</EM
> (to save disk space automatically);
<EM
CLASS="emphasis"
>immutable</EM
> (so it can't be changed at all); <EM
CLASS="emphasis"
>undeletable</EM
>,
and more.  Check your online documentation (type <B
CLASS="emphasis.bold"
>man chattr</B
>&nbsp;- see
<A
CLASS="xref"
HREF="ch07_01.htm"
TITLE="Where to Go from Here "
>Chapter 7</A
>) or ask your system administrator for advice on your system.</P
><DIV
CLASS="sect3"
><H4
CLASS="sect3"
><A
CLASS="title"
NAME="LUX-CH-3-SECT-3.3.1"
>3.3.3.1 Problem checklist</A
></H4
><P
CLASS="para"
></P
><DL
CLASS="variablelist"
><DT
CLASS="term"
><EM
CLASS="emphasis"
>I get the message &quot;chmod: 
Not owner.&quot;</EM
></DT
><DD
CLASS="listitem"
><P
CLASS="para"
>Only the owner of a file or directory can set its permissions.
Use <B
CLASS="emphasis.bold"
>ls -l</B
> to find the owner.</P
></DD
></DL
><A
CLASS="indexterm"
NAME="AUTOID-2281"
></A
><A
CLASS="indexterm"
NAME="AUTOID-2282"
></A
></DIV
></DIV
></DIV
><DIV
CLASS="htmlnav"
><P
></P
><HR
ALIGN="LEFT"
WIDTH="515"
TITLE="footer"><TABLE
WIDTH="515"
BORDER="0"
CELLSPACING="0"
CELLPADDING="0"
><TR
><TD
ALIGN="LEFT"
VALIGN="TOP"
WIDTH="172"
><A
CLASS="SECT1"
HREF="ch03_02.htm"
TITLE="3.2 Looking Inside Files"
><IMG
SRC="../gifs/txtpreva.gif"
ALT="Previous: 3.2 Looking Inside Files"
BORDER="0"></A
></TD
><TD
ALIGN="CENTER"
VALIGN="TOP"
WIDTH="171"
><A
CLASS="book"
HREF="index.htm"
TITLE="Learning the Unix Operating System"
><IMG
SRC="../gifs/txthome.gif"
ALT="Learning the Unix Operating System"
BORDER="0"></A
></TD
><TD
ALIGN="RIGHT"
VALIGN="TOP"
WIDTH="172"
><A
CLASS="SECT1"
HREF="ch03_04.htm"
TITLE="3.4 Electronic Mail"
><IMG
SRC="../gifs/txtnexta.gif"
ALT="Next: 3.4 Electronic Mail"
BORDER="0"></A
></TD
></TR
><TR
><TD
ALIGN="LEFT"
VALIGN="TOP"
WIDTH="172"
>3.2 Looking Inside Files</TD
><TD
ALIGN="CENTER"
VALIGN="TOP"
WIDTH="171"
><A
CLASS="index"
HREF="index/idx_0.htm"
TITLE="Book Index"
><IMG
SRC="../gifs/index.gif"
ALT="Book Index"
BORDER="0"></A
></TD
><TD
ALIGN="RIGHT"
VALIGN="TOP"
WIDTH="172"
>3.4 Electronic Mail</TD
></TR
></TABLE
><HR
ALIGN="LEFT"
WIDTH="515"
TITLE="footer"><IMG
SRC="../gifs/smnavbar.gif"
USEMAP="#map"
BORDER="0"
ALT="The UNIX CD Bookshelf Navigation"><MAP
NAME="map"
><AREA
SHAPE="RECT"
COORDS="0,0,73,21"
HREF="../index.htm"
ALT="The UNIX CD Bookshelf"><AREA
SHAPE="RECT"
COORDS="74,0,163,21"
HREF="../upt/index.htm"
ALT="UNIX Power Tools"><AREA
SHAPE="RECT"
COORDS="164,0,257,21"
HREF="../unixnut/index.htm"
ALT="UNIX in a Nutshell"><AREA
SHAPE="RECT"
COORDS="258,0,321,21"
HREF="../vi/index.htm"
ALT="Learning the vi Editor"><AREA
SHAPE="RECT"
COORDS="322,0,378,21"
HREF="../sedawk/index.htm"
ALT="sed &amp; awk"><AREA
SHAPE="RECT"
COORDS="379,0,438,21"
HREF="../ksh/index.htm"
ALT="Learning the Korn Shell"><AREA
SHAPE="RECT"
COORDS="439,0,514,21"
HREF="index.htm"
ALT="Learning the UNIX Operating System"></MAP
></DIV
></BODY
></HTML
>
