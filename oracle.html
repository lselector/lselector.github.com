<!doctype html public "-//w3c//dtd html 4.0 transitional//en">
<html>
<head>
   <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
   <meta name="Description" content="Machine Learning, AI, Data Science, Python, Jupyter, Linux, Cloud, SQL">
   <meta name="GENERATOR" content="Mozilla/4.7 [en] (WinNT; U) [Netscape]">
   <meta name="Author" content="Lev Selector">
   <title>oracle</title>
<!--

"Description" content="Machine Learning, AI, Data Science, Python, Jupyter, Linux, Cloud, SQL"

-->
<link REL="stylesheet" TYPE="text/css" HREF="style0.css" >
<style type="text/css">
<!--
.style1 {
	color: #CC0000;
	font-weight: bold;
}
.style2 {color: #0000FF}
-->
</style>
</head>
<body text="#000000" bgcolor="#FFFFFF">
<a NAME="top"></a>
<table BORDER=0 CELLSPACING=0 CELLPADDING=0 WIDTH="100%" >
<tr>
<td ALIGN=LEFT WIDTH="1%"><spacer type=block width=1 height=1></td>

<td ALIGN=LEFT><b><font color="#CC0000">LevSelector.com</font></b><spacer type=block width=1 height=1></td>

<td ALIGN=RIGHT VALIGN=BOTTOM><spacer type=block width=1 height=1><b><font color="#CC0000">New
York</font></b></td>

<td ALIGN=LEFT WIDTH="1%"><spacer type=block width=1 height=1></td>
</tr>
</table>

<table BORDER=0 CELLSPACING=0 CELLPADDING=0 WIDTH="100%" >
<tr>
<td><spacer type=block width=1 height=1></td>
</tr>

<tr>
<td BGCOLOR="#66CCFF"><spacer type=block width=1 height=1></td>
</tr>

<tr>
<td><spacer type=block width=1 height=1></td>
</tr>
</table>

<table BORDER=0 CELLSPACING=0 CELLPADDING=0 WIDTH="100%" BGCOLOR="#C4ECFF" >
<tr>
<td ALIGN=LEFT WIDTH="1%"><spacer type=block width=1 height=1></td>

<td ALIGN=LEFT><spacer type=block width=1 height=1><b><a href="index.html">home</a>
> Oracle</b></td>

<td ALIGN=RIGHT VALIGN=BOTTOM><spacer type=block width=1 height=1><b></b></td>

<td ALIGN=LEFT WIDTH="1%"><spacer type=block width=1 height=1></td>
</tr>
</table>

<table BORDER=0 CELLSPACING=0 CELLPADDING=0 WIDTH="100%" >
<tr>
<td><spacer type=block width=1 height=1></td>
</tr>

<tr>
<td BGCOLOR="#51C7FF"><spacer type=block width=1 height=1></td>
</tr>

<tr>
<td><spacer type=block width=1 height=1></td>
</tr>
</table>

<p><b><font color="#CC0000">Oracle</font></b>
<table width="95%" border="0" cellpadding="3" cellspacing="0">
  <tr>
    <td><span class="style1">On This Page</span></td>
    <td class="style1">Other Pages</td>
  </tr>
  <tr>
    <td><font color="#6699CC">* </font><a href="#intro">intro</a> <br>
      <font color="#6699CC">* </font><a href="#tools">tools</a> <br>
      <font color="#6699CC">* </font><a href="#books">books</a> <br>
    <font color="#6699CC">* </font><a href="#hints">hints</a></td>
    <td><p><font color="#6699CC">* </font><a href="oracle_bulk_operations.html">Oracle Bulk Operations</a> <br>
        <font color="#6699CC">* </font><br>
        <font color="#6699CC">*<br>
        </font><font color="#6699CC">* </font></p>
    </td>
  </tr>
</table>
<p><br>
  <a NAME="intro"></a>
<br>&nbsp;
<table BORDER=0 CELLSPACING=0 CELLPADDING=0 WIDTH="100%" BGCOLOR="#C4ECFF" >
<tr>
<td ALIGN=LEFT WIDTH="1%"><spacer type=block width=1 height=1></td>

<td ALIGN=LEFT><b>Intro</b></td>

<td ALIGN=RIGHT VALIGN=BOTTOM><b><a href="index.html">home</a> - <a href="#top">top
of the page</a> - </b></td>

<td ALIGN=LEFT WIDTH="1%"><spacer type=block width=1 height=1></td>
</tr>
</table>

<p><font color="#6699CC">* </font><a href="http://technet.oracle.com/">technet.oracle.com</a>
- Oracle Technology Network
<br>
<font color="#6699CC">* </font><a href="asktom.oracle.com">asktom.oracle.com</a> - Thomas Kyte's site<br>
<font color="#6699CC"></font><font color="#6699CC">* </font><a href="http://directory.google.com/Top/Computers/Software/Databases/Oracle/">directory.google.com/Top/Computers/Software/Databases/Oracle</a>
- Oracle on Google
<br>
<font color="#6699CC">* </font><a href="http://www.learningoracle.com/">www.learningoracle.com</a>
- book recomendations
<br>
<font color="#6699CC">* </font><a href="http://oracle.oreilly.com/">oracle.oreilly.com</a>
- Oracle books on O'Reilly
<br>
<font color="#6699CC">* </font><a href="http://www.oramag.com/">www.oramag.com</a>
- Oracle Magazine
<br>
<font color="#6699CC">* </font><a href="http://oracle.ittoolbox.com/">oracle.ittoolbox.com</a> - 
<br>
<font color="#6699CC">* </font><a href="http://education.oracle.com/certification/sampleq.html">education.oracle.com</a>
-Oracle courses and certification tests<br>
<font color="#6699CC">* </font><a href="http://www.orafaq.com"><strong>http://www.orafaq.com</strong></a> = <font color="#6699CC"> </font><b><a href="http://www.orafaq.net/">http://www.orafaq.net</a></b> - FAQ, Scripts, whole world <br>
  <font color="#6699CC">* </font><b><a href="http://www.orafaq.net/faqscrpt.htm">http://www.orafaq.net/faqscrpt.htm</a></b> - Oracle Scripts - very good<br>
  <font color="#6699CC">* </font><a href="http://www.oriolecorp.com/index1.html">www.oriolecorp.com/index1.html</a> - Free Oracle SQL scripts and DBA tools <br>

<p><font color="#6699CC">* </font><a href="http://www.revealnet.com/">www.revealnet.com</a>
- RevealNet, Oracle information portal.
<br><font color="#6699CC">* </font><a href="http://www.dbasupport.com/cert/">www.dbasupport.com/cert/</a>
- Oracle Certification training
<br><font color="#6699CC">* </font><a href="http://www.dbasupport.com/dbres/Technical_Docs/Tutorials/">www.dbasupport.com/dbres/Technical_Docs/Tutorials/</a>
- tutorials
<br><font color="#6699CC">* </font><a href="http://www.dbasupport.com/faq/">www.dbasupport.com/faq/</a> - Oracle <b>FAQ</b>. <br>
<font color="#6699CC"></font><font color="#6699CC">* </font><a href="http://www.oraclenotes.com/">www.oraclenotes.com/</a>
- Study Oracle Notes and Forums
<p><font color="#6699CC">* </font><a href="http://www.animatedlearning.com/">www.animatedlearning.com/</a> - animated tutorials <br>
  <font color="#6699CC">* </font><a href="http://www.sideris.com/curriculum.asp">www.sideris.com/curriculum.asp</a> - training (for $$ - but has free contents) <br>
  <font color="#6699CC">* </font><a href="http://www.google.com/search?q=video+training+oracle&hl=en&safe=off&btnG=Google+Search">Google
    search for video+training+oracle</a> - find video training on Google
<p><font color="#6699CC">* </font><a href="http://www.oracle.com/oramag/code/">www.oracle.com/oramag/code/</a>
- Tips from Oracle<br><font color="#6699CC">* </font><a href="http://www.revealnet.com/dbapipe/tips.htm">www.revealnet.com/dbapipe/tips.htm</a>
- tips on RevealNet
<p><font color="#6699CC">* </font><a href="http://www.osborne.com/oracle/dbafaq/dbafaq1.htm">www.osborne.com/oracle/dbafaq/dbafaq1.htm</a>
- A good <b>FAQ</b> for administrators.
<br>
<font color="#6699CC">* </font><a href="http://www.theoracleresourcestop.com/">www.theoracleresourcestop.com/</a>
- discussions, scripts, info, links, white papers
<p><font color="#6699CC">* </font><a href="http://www.geocities.com/SiliconValley/Peaks/4535/oracle/">www.geocities.com/SiliconValley/Peaks/4535/oracle/</a>
- Biju's Oracle DBA page - scripts, tips, tools, utilities, unix scripts,
gensql, hints, rdbms, oracle <b>FAQ</b>
<br>
<font color="#6699CC">* </font><a href="http://www.rchath.com">www.rchath.com</a>
- Rakesh Chathli's Site on Oracle Financials' implementation issues -
<br>
Solutions to various Oracle Financials' implementation issues as posted
on OraApps List
<br>
<br>
<a NAME="tools"></a>
<br>
&nbsp;

<table BORDER=0 CELLSPACING=0 CELLPADDING=0 WIDTH="100%" BGCOLOR="#C4ECFF" >
<tr>
<td ALIGN=LEFT WIDTH="1%"><spacer type=block width=1 height=1></td>

<td ALIGN=LEFT><b>Tools</b></td>

<td ALIGN=RIGHT VALIGN=BOTTOM><b><a href="index.html">home</a> - <a href="#top">top
of the page</a> - </b></td>

<td ALIGN=LEFT WIDTH="1%"><spacer type=block width=1 height=1></td>
</tr>
</table>

<p><b><u>Tools For Oracle:</u></b>
<p>Oracle download page - here you can download the client and the database:<br>
&nbsp;&nbsp;&nbsp;&nbsp;<a href="http://www.oracle.com/technology/software/products/database/">http://www.oracle.com/technology/software/products/database/</a>
<br>To play with Oracle on your PC you can download  Oracle Express Edition:<br>
&nbsp;&nbsp;&nbsp;&nbsp;<a href="http://www.oracle.com/technology/products/database/xe/">http://www.oracle.com/technology/products/database/xe/</a><br>
  It comes with a client - so that all your tools will work.

<ul>
  <li><strong>sqlplus</strong> - from prompt, free<strong> </strong>(comes with Oracle client). </li>
  <li><strong>SQL Developer</strong> and other tools from Oracle - <a href="http://www.oracle.com/tools">http://www.oracle.com/tools</a> </li>
  <li><strong>PL/SQL Developer</strong> ($200) - <a href="http://www.allroundautomations.nl/plsqldev.html">http://www.allroundautomations.nl/plsqldev.html</a> - very nice</li>
  <li><b>TOra</b> - Toolkit For Oracle - very good, easy, light - and free. -&nbsp;<a href="http://tora.sourceforge.net/">http://tora.sourceforge.net</a>  </li>
  <li><strong>SQL Navigator</strong> from Quest - <a href="http://www.quest.com/sql-navigator/">http://www.quest.com/sql-navigator</a> - excellent - but expensive</li>
  <li><strong>Toad</strong> from Quest - <a href="http://www.quest.com/toad/">http://www.quest.com/toad</a> - also excellent and expensive</li>
  <li>Toad free limited version -  <a href="http://www.toadsoft.com/">www.toadsoft.com</a>  </li>
  <li><b>DBArtisan</b> and <strong>RapidSQL</strong> from <a href="http://www.embarcadero.com">http://www.embarcadero.com</a></li>
</ul>
<p> <br>
  <a NAME="books"></a>
  <br>
  &nbsp;
<table BORDER=0 CELLSPACING=0 CELLPADDING=0 WIDTH="100%" BGCOLOR="#C4ECFF" >
<tr>
<td ALIGN=LEFT WIDTH="1%"><spacer type=block width=1 height=1></td>

<td ALIGN=LEFT><b>Books</b></td>

<td ALIGN=RIGHT VALIGN=BOTTOM><b><a href="index.html">home</a> - <a href="#top">top
of the page</a> - </b></td>

<td ALIGN=LEFT WIDTH="1%"><spacer type=block width=1 height=1></td>
</tr>
</table>

<p>Books:
<ul>
  <li>Thomas Kyte - Expert Oracle Database Architecture:9i and 10g Programming Techniques and Solutions </li>
  <li>Thomas Kyte - Effective Oracle by Design </li>
  <li>Oracle Database 10g: The Complete Reference </li>
  <li>Oracle PL/SQL Programming, 4th Edition by Steven Feuerstein and Bill Pribyl </li>
</ul>
<p>Old books:</p>
<ul>
  <li> Oracle8: The Complete Reference * George Koch, Kevin Loney </li>
  <li> Oracle Advanced PL/SQL Programming - by Scott Urman (2000)</li>
  <li>Oracle8i DBA Handbook - Kevin Loney, Marlene Theriault </li>
  <li> Oracle Certified Professional Application Developer Exam Guide - Christopher Allen, et al</li>
  <li> Oracle Certified Professional Financial Applications Consultant Exam Guide - Christopher Allen, Vivian Chow</li>
  <li> Oracle8 How-To : The Definitive Oracle8 Problem-Solver - Edward Honour, Paul Dalberth, Ari Kaplan, Atul Mehta </li>
  <li> Building Intelligent Databases With Oracle Pl/Sql, Triggers, and Stored Procedures -  by Kevin T. Owens (Preface)</li>
</ul>
<p>&nbsp;</p>
    <a NAME="hints"></a>
    <br>
&nbsp; 
<table BORDER=0 CELLSPACING=0 CELLPADDING=0 WIDTH="100%" BGCOLOR="#C4ECFF" >
<tr>
<td ALIGN=LEFT WIDTH="1%"><spacer type=block width=1 height=1></td>

<td ALIGN=LEFT><b>Hints</b></td>

<td ALIGN=RIGHT VALIGN=BOTTOM><b><a href="index.html">home</a> - <a href="#top">top
of the page</a> - </b></td>

<td ALIGN=LEFT WIDTH="1%"><spacer type=block width=1 height=1></td>
</tr>
</table>

<p><b><u>Put SQL commands into a file (e.g.&nbsp; test.sql) and run it
from unix prompt:</u></b>
<p><font color="#3333FF">cat&nbsp; test.sql&nbsp; |&nbsp; sqlplus scott/tiger@starter</font>
<p>Note: remember to put a semicolon at the end of every SQL statement
<br>&nbsp;
<br>&nbsp;
<table BORDER CELLSPACING=0 CELLPADDING=2 BGCOLOR="#CCFFFF" NOSAVE >
<tr NOSAVE>
<td NOSAVE>login: oracle&nbsp;
<br>password: (root password)&nbsp;
<br>ps -ef | grep smon&nbsp;
<br>export ORACLE_SID=starter&nbsp;
<br>sqlplus system/manager@starter&nbsp;
<br>// or from SQL> connect system/manager@starter&nbsp;
<br>// SQL clients: sqlplusw, SQL Navigator, TOAD&nbsp;
<br>select name from v$database&nbsp;
<br>select * from cat&nbsp;
<br>select * from dict&nbsp;
<br>!pwd&nbsp;
<br>spool datadict.txt&nbsp;
<br>...&nbsp;
<br>spool off&nbsp;
<p>desc cat&nbsp;
<br>desc dict&nbsp;
<br>column table_name format A16;&nbsp;
<br>column comments format A50;&nbsp;
<br>select * from dict where rownam&lt;10;&nbsp;
<br>select table_name from dict where table_name like '%USER%';&nbsp;
<br>connect scott/tiger@starter&nbsp;
<br>select table_name from user_tables;&nbsp;
<br>desc all_objects&nbsp;
<br>select owner, object_name from all_objects where owner =&nbsp;
<br>select table_name from user_tables;&nbsp;
<br>select user_name from dba_users;&nbsp;
<br>sho user&nbsp;
<br>select tablespace_name from dba_tables;&nbsp;
<p>create user myuser identified by //here is her password&nbsp;
<br>default tablespace USERS&nbsp;
<br>temporary tablespace TEMP;&nbsp;
<br>grant connect, create table to myuser
<br>desc dba_sys_priv&nbsp;
<p>select table_name from dict where table_name like '%PRIV%';&nbsp;
<br>desc dba_role_privs&nbsp;</td>
</tr>
</table>

<br>&nbsp;
<p><b><u>Here is how to get 10 rows of the result - and then next 10:</u></b>
<table BORDER=0 CELLSPACING=0 CELLPADDING=3 BGCOLOR="#66FF99" NOSAVE >
<tr>
<td><font color="#3333FF">SELECT *</font>
<br><font color="#3333FF">&nbsp; FROM ( SELECT * FROM my_table ORDER BY
my_col )</font>
<br><font color="#3333FF">&nbsp; WHERE ROWNUM &lt;= 10;</font>
<p><i>Next 10: just grab all of them out to the end, and only show the
last 10 (possibly adding</i>
<br><i>ROWNUM as a SELECTed column.</i>
<p><font color="#3333FF">SELECT col1, col2, col3</font>
<br><font color="#3333FF">&nbsp; FROM ( SELECT ROWNUM AS row_num, col1,
col2, col3</font>
<br><font color="#3333FF">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
FROM ( SELECT col1, col2, col3 FROM my_table ORDER BY col1 )</font>
<br><font color="#3333FF">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
WHERE ROWNUM &lt;= 20 )</font>
<br><font color="#3333FF">&nbsp; WHERE row_num >= 11;</font>
<br>&nbsp;</td>
</tr>
</table>

<p>How to update / delete depending on a join to another table:
<br>&nbsp;
<table BORDER=0 CELLSPACING=0 CELLPADDING=3 BGCOLOR="#66FF99" NOSAVE >
<tr>
<td width="750"><font color="#3333FF">update maintab m&nbsp;</font>
<br>
<font color="#3333FF">set (m.fname,m.lname) =&nbsp;</font>
<br><font color="#3333FF">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; (select u.fname,u.lname
from updates u where m.id=u.id)&nbsp;</font>
<br><font color="#3333FF">where exists&nbsp;</font>
<br><font color="#3333FF">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; (select u.fname,u.lname
from updates u where m.id=u.id)</font>
<p>Note: if you omit the "where exists" clause - then all rows in the maintab
will be updated (those rows which don't belong to inner join will be updated
by NULLs).
<p><font color="#3333FF">update maintab m&nbsp;</font>
<br><font color="#3333FF">set m.name = (select u.name from updates u where
m.id=u.id)&nbsp;</font>
<br><font color="#3333FF">where exists&nbsp; (select u.name from updates
u where m.id=u.id)&nbsp;</font>
<p><font color="#3333FF">delete from maintab m&nbsp;</font>
<br><font color="#3333FF">where exists&nbsp; (select u.name from updates
u where m.id=u.id and u.dept='RESEARCH')&nbsp;</font>
<p><b><u>Outer join - include all departments:</u></b>
<br><font color="#3333FF">SELECT&nbsp; d.deptno,e.empno, e.ename, e.job</font>
<br><font color="#3333FF">FROM&nbsp;&nbsp; emp e, dept d</font>
<br><font color="#3333FF">WHERE&nbsp;&nbsp; d.deptno = e.deptno(+);&nbsp;</font></td>
</tr>
</table>

<p><b><u>Working with Oracle from Perl:</u></b>
<br>&nbsp;
<table BORDER=0 CELLSPACING=0 CELLPADDING=2 BGCOLOR="#99FFCC" NOSAVE >
<tr NOSAVE>
<td NOSAVE><b><u>Setting up DBD-Oracle:&nbsp;</u></b>
<br>untar the files as usual.&nbsp;
<br>procedure standard:&nbsp;
<br>perl Makefile.PL&nbsp;
<br>make&nbsp;
<br>make test&nbsp;
<br>
make install<br>
<br>
but before running all this make sure that you've done 2 things:&nbsp;
<br>
<b><u>1. add env. variables - here is part of .bash_profile :&nbsp;</u></b>
<br>ORACLE_BASE=/usr/local/oracle/8i/u01/app/oracle&nbsp;
<br>ORACLE_HOME=$ORACLE_BASE/product/8.1.6&nbsp;
<br>ORACLE_SID=starter
<br>CLASSPATH=.:~oracle/jre118_v1/lib/rt.jar&nbsp;
<br>PATH=.:$PATH:$HOME/bin:$ORACLE_HOME/bin&nbsp;
<br>ENV=$HOME/.bashrc&nbsp;
<br>USERNAME="root"&nbsp;
<br>PS1="\u@\h \w#&nbsp; "&nbsp;
<br>mesg n&nbsp;
<br>export USERNAME ENV PATH ORACLE_BASE ORACLE_HOME ORACLE_SID CLASSPATH&nbsp;
<br>-------------------------------------------------------&nbsp;
<br><u>2. put your $ORACLE_HOME/lib in your /etc/ld.so.conf<br>

(expand it to the explicit path) and then re-run&nbsp; /sbin/ldconfig.</u>
<br>
<p>You may need to add database name into test.pl (or edit other env. accordingly)&nbsp;
<br>------------------------------------------------------------------------------&nbsp;
<br>log files:&nbsp;
<br>&nbsp; $ORACLE_BASE/admin/starter/udump&nbsp;
<br>&nbsp; $ORACLE_BASE/admin/starter/bdump&nbsp;
<p><b><u>Here is an example of simple Perl script using DBD-Oracle:&nbsp;</u></b>
<table BORDER BGCOLOR="#FFFFCC" NOSAVE >
<tr NOSAVE>
<td NOSAVE>#!/usr/local/bin/perl&nbsp;
<br># oratest.cgi
<br>use DBI;&nbsp;
<br>$ENV{ORACLE_HOME}='/usr/local/oracle/8i/u01/app/oracle/product/8.1.6';&nbsp;
<br>my $dbh = DBI->connect("dbi:Oracle:starter", "scott", "tiger", { RaiseError
=> 1, PrintError => 1 } )&nbsp;
<br>&nbsp; or die $DBI::errstr;&nbsp;
<br>my $sql = "SELECT * FROM EMP";&nbsp;
<br>my $sth = $dbh->prepare($sql);&nbsp;
<br>my $rv&nbsp; = $sth->execute();&nbsp;
<p>print "Content-Type: text/html\n\n";&nbsp;
<br>print "&lt;html>&lt;head>&lt;title>test&lt;/title>&lt;/head>&lt;body>&lt;table>\n";&nbsp;
<p>while(@row = $sth->fetchrow_array) {&nbsp;
<br>&nbsp;&nbsp; print "&lt;tr>\n";&nbsp;
<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; map { print "&lt;td>$_&lt;/td>\n";
} @row;&nbsp;
<br>&nbsp;&nbsp; print "&lt;/tr>\n";&nbsp;
<br>}&nbsp;
<p>print "&lt;/table>&lt;/body>&lt;/html>\n";&nbsp;
<br>$dbh->disconnect;&nbsp;
<br>exit();&nbsp;</td>
</tr>
</table>
<p>More examples on how to work with Oracle from Perl you can find in documentation for DBD::Oracle. For example, here is how to execute pieces of PL/SQL code:</p>
<p>(from <a href="http://search.cpan.org/~pythian/DBD-Oracle-1.22/Oracle.pm#PL/SQL_Examples">http://search.cpan.org/~pythian/DBD-Oracle-1.22/Oracle.pm#PL/SQL_Examples</a> )</p>
<table BORDER BGCOLOR="#FFFFCC" NOSAVE >
  <tr NOSAVE>
    <td NOSAVE><p># Calling a PLSQL procedure:</p>
      <p>########## with no parameters<br>
      $csr = $db-&gt;prepare(q{ begin mypackage.proc1; end; });<br>
  $csr-&gt;execute;</p>
      <p>########## with one IN and one OUT parameters<br>
      my $pin = 5;<br>
        my $pout;<br>
        $csr = $db-&gt;prepare(q{ begin mypackage.proc2(:pin, :pout); end; });<br>
        $csr-&gt;bind_param(&quot;:pin&quot;, $pin);<br>
        $csr-&gt;bind_param_inout(&quot;:pout&quot;, \$pout, 1);<br>
        $csr-&gt;execute;<br>
        print &quot;$pin, $pout\n&quot;;</p>
      <p>########## return value<br>
      my $retval = &quot;&quot;;<br>
  $csr = $db-&gt;prepare(q{ begin :retval := mypackage.func1; end; });<br>
  $csr-&gt;bind_param_inout(&quot;:retval&quot;, \$retval, 20);<br>
  $csr-&gt;execute;<br>
  print &quot;$retval\n&quot;;</p>
      <p>########## processing error<br>
      &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# procedure mypackage.proc3() has the following code:<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# 
  RAISE_APPLICATION_ERROR(err_code, 'This is a test.');<br>
$db-&gt;{RaiseError} = 1;<br>
      my $err_code = -20001;<br>
  $csr = $db-&gt;prepare(q{ begin mypackage.proc3(:err_code); end; });<br>
      $csr-&gt;bind_param(&quot;:err_code&quot;, $err_code);<br>
      eval { $csr-&gt;execute; };<br>
      print 'After proc_in: $@=',&quot;'$@', errstr=$DBI::errstr, ret_val=$ret_val\n&quot;;</p>
      </td>
  </tr>
</table>
<p>PL/SQL does not always give you details about errors in procedures.  
  To get more info do this:</p>
<p>show errors; -- shows the last errors. You can also abbriviate it as &quot;SHO ERR&quot;.</p>
<p>or something like this:</p>
<p>show errors procedure myproc;</p>
</td>
</tr>
</table>

<p>------------------------------------------------------------------------------<table BORDER=0 CELLSPACING=0 CELLPADDING=3 BGCOLOR="#66FF99" NOSAVE >
  <tr>
    <td width="750"><p>&quot;decode&quot; function - if/else, if/else, ..., default - functionality</p>
      <p><font color="#3333FF">decode( expression , search , result [, search , result]... [, default] ) </font></p>
      <p>SELECT <br>
&nbsp;&nbsp;&nbsp;        decode(company_id,<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;        1,	'Company 1',<br>
        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;2,	'Company 2',<br>
        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;'Other') 'Company Name'<br>
      FROM companies;</p>
    </td>
  </tr>
</table>
<br>
<table BORDER=0 CELLSPACING=0 CELLPADDING=3 BGCOLOR="#FFFFCC" NOSAVE >
  <tr>
    <td width="750"><p>&quot;NVL&quot; function - replace null value with some other value</p>
      <p>NVL( string1, string2 )</p>
      <p>string1 is the string to test for a null value.<br>
      string2 is the value returned if string1 is null.</p>
    </td>
  </tr>
</table>
<br>
<table BORDER=0 CELLSPACING=0 CELLPADDING=3 BGCOLOR="#66FF99" NOSAVE >
  <tr>
    <td width="750"><p>Example:</p>
      <pre>select '2'||to_char(sysdate, 'yyyymmdd')||rownum Sequence_Number,<br>     to_char(sysdate, 'yyyymmdd') Extraction_Date,<br>     substr(trim(sm.issue_name), 1, 50) Security_Full_Name,<br>     trim(sm.currency_code) Price_Ccy_Cde,<br>     trim(nra_tax_country) Market_Country_Cde,<br>     trim(sm.currency_code) Cash_Holding_Ccy_Cde,<br>     trim(decode(nvl(sm.security_type, 'N'), 'N', substr(sm.investment_type, 1,2),sm.security_type)) Investment_Type_Description,<br>     trim(sm.nra_tax_country) Domicile_Country_Cde,<br>     trim(smd.country_of_risk) Risk_Country_Cde,<br>     decode(nvl(to_char(fi.issue_date), 'N'), 'N', '00000000',  to_char(fi.issue_date, 'yyyymmdd')) Issue_Dte,<br>     decode(nvl(to_char(sm.mat_date), 'N'), 'N', '00000000',  to_char(sm.mat_date, 'yyyymmdd')) Final_Maturity_Dte,<br>     null Market_Vendor_Rating_S_P,<br>     null Market_Vendor_Rating_Moody,<br>       decode(trim(sm.primary_asset_id_type), 'CUSIP',trim(sm.primary_asset_id),<br>                                      'ISIN' ,trim(sm.primary_asset_id),<br>                     NULL) Pref_Ext_Security_Number,<br>     decode(trim(sm.primary_asset_id_type), 'CUSIP',trim(sm.primary_asset_id_type),<br>                                      'ISIN' ,trim(sm.primary_asset_id_Type),<br>                     NULL) External_market_Id,<br>     sm.security_alias Internal_Security_Number,<br>     null EagleFund,<br>     d.underlying_sec_alias Underlying_Security_No,<br>     d.contract_size Contract_Size,<br>     substr(upper(sme.industry_sector), 1,3) Sector_Cde<br>from securitydbo.security_master sm,<br>     securitydbo.secmaster_detail_ext sme,<br>     securitydbo.security_master_detail smd,<br>     securitydbo.fixed_income fi,<br>     securitydbo.derivatives d<br> where sm.security_alias = sme.security_alias(+)<br>   and sm.security_alias = smd.security_alias(+)<br>   and sm.security_alias = d.security_alias(+)<br>   and sm.security_alias = fi.security_alias(+)<br>   and trim(sm.update_date) &gt;= trim(sysdate - 1)</pre>
    </td>
  </tr>
</table>
<br>
<table BORDER=0 CELLSPACING=0 CELLPADDING=3 BGCOLOR="#FFFFCC" NOSAVE >
  <tr>
    <td width="750"><p>Detecting and removing duplicates</p>
      <p>select distinct ...</p>
      <p>select unique_id<br>
      from mytab t1<br>
      where rowid &gt; (select min(rowid) from mytab t2 where t1.key1 = t2.key1);</p>
      <p>delete from mytab t1<br>
      where t1.rowid &gt; any (select t2.rowid from mytab t2 where t1.key1=t2.key1);</p>
      <p>delete from mytab where  rowid NOT IN (select max(rowid) from mytab group by  key1);<br>
      </p>
      <p>delete from mytab a<br>
        where 
a.rowid &gt; 
ANY <br>
&nbsp; (SELECT b.rowid 
FROM mytab b<br>
&nbsp;&nbsp;&nbsp;&nbsp;WHERE (a.col1 = b.col1 OR (a.col1 is null AND b.col1 is null))<br>
&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;AND (a.col2 = b.col2 OR (a.col2 is null AND b.col2 is null))<br>
&nbsp;&nbsp;); <br>
      </p>
      <p>delete from 
customer<br>
where rowid in 
<br>
&nbsp; (select rowid from <br>
&nbsp;&nbsp;&nbsp;&nbsp;(select 
rowid,
row_number()<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;over 
(partition by custnbr order by custnbr) dup<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;from customer)<br>
&nbsp;&nbsp;where dup &gt; 1); </p>
      <p>CREATE [UNIQUE] INDEX index_name<br>
ON table_name (column1, column2, . column_n)<br>
[ COMPUTE STATISTICS ];</p>
      <p><br>
      </p></td>
  </tr>
</table>
<br>
<table BORDER=0 CELLSPACING=0 CELLPADDING=3 BGCOLOR="#66FF99" NOSAVE >
  <tr>
    <td width="750"><p>outer join - old and new syntax</p>
      <p>select a.name, nvl(b.title,'--') title<br>
        from authors a, books b<br>
        where a.a_id = b.a_id(+);</p>
      <p>select a.name, nvl(b.title,'--') title<br>
        from authors a<br>
      left outer join books b on  a.a_id = b.a_id;</p>
      <p>select a.name, nvl(b.title,'--') title<br>
from authors a<br>
left outer join books b using (a_id);<br>
      </p>
    </td>
  </tr>
</table>
<br>
<table BORDER=0 CELLSPACING=0 CELLPADDING=3 BGCOLOR="#FFFFCC" NOSAVE >
  <tr>
    <td width="750"><p>VARCHAR2 - 1..4000 bytes<br>
      VARCHAR	 - deprecated<br>
      CHAR(size) - fixed length, 1..2000 bytes<br>
      NCHAR - fixed length, national char. set, 1..2000 bytes<br>
      NUMBER - floating-point number with decimal precision 38<br>
      NUMBER(p,s) (p in 1..38, s in -84..127)<br>
      NUMBER(p,0) = INTEGER<br>
      LONG - depricated, use BLOB instead of it.<br>
      DATE - 1 ssec presicion<br>
    TIMESTAMP(fractional_seconds_precision) - precision may be from 0 to 9, default = 6.</p>
      <p><br>
CLOB, NCLOB,BLOB, BFILE, XMLType -  large objectw, up to 4 GB  <br>
        ROWID - phys.address of each row<br>
        UROWID(n) - logical address (n - the size of the UROWID column: 1..4000)<br>
  <br>
        INTEGER - ANSI, same as NUMBER(38)<br>
        FLOAT(p) - ANSI - similar to NUMBER, but p is binary precision <br> 
        <br>
      </p>
  <p>Example: the value 7,456,123.89 will display as follows<br>
          NUMBER(9)     7456124 <br>
          NUMBER(9,1)   7456123.9<br>
          NUMBER(*,1)   7456123.9 <br>
          NUMBER(9,2)   7456123.89 <br>
          NUMBER(6)    [not accepted exceeds precision] <br>
          NUMBER(7,-2)  7456100 <br>
          NUMBER        7456123.89 <br>
          FLOAT         7456123.89 <br>
          FLOAT(12)     7456000.0<br>
      Oracle stores all numeric data in variable length format.</p>
  <p>INTERVAL YEAR[(p)] TO MONTH - stores a period of time represented as years and months. p is the number of digits in the YEAR datetime field (can be  0..9, default =  2).</p>
   <p>INTERVAL DAY[(p1)] TO SECOND[(p2)] - stores a period of time represented as days, hours, minutes and seconds with a fractional part.</p>
   </td>
  </tr>
</table>
<p>&nbsp;</p>
<table BORDER=0 CELLSPACING=0 CELLPADDING=3 BGCOLOR="#66FF99" NOSAVE >
  <tr>
    <td width="750"><p>Output from the script</p>
      <p>First method using dbms_output.put_line('...'). For example:</p>
      <p class="style2">set serveroutput on;<br>
      dbms_output.put_line('some text');</p>
      <p>The problem - it is buffered - and will make output only at the very end.<br>
      Another way - output into a file using <span class="style2">utl_file.put_line</span>(). Here is how you can call sqlplus from your shell script:</p>
      <p class="style2">sqlplus -s / &lt;&lt;-EOF<br>
        set echo off <br>
        set verify off<br>
        set feed off<br>
        set pagesize 0<br>
        set pause off<br>
        set linesize 4000<br>
        set trims on<br>
        set serveroutput on size 1000000<br>
        DECLARE<br>
        fichero utl_file.file_type;<br>
        BEGIN<br>
        fichero:=utl_file.fopen('/tmp','hot_backup.cmd','W');<br>
        utl_file.put_line(fichero,'LINE 1');<br>
        utl_file.put_line(fichero,'LINE 2');<br>
        utl_file.fclose(fichero);<br>
        END;<br>
        /<br>
        EOF</p>
      <p>The best way - using <span class="style1">autonomous transaction</span>. An autonomous transaction can be committed even if the 
          parent transaction that triggered it is rolled back, hence the 
        term &quot;autonomous&quot;. The autonomous transaction has no link to the calling transaction, so only commited data can be shared by both transactions. These are useful for auditing purposes, where 
          even if an attempted parent transaction fails, a child 
          autonomous transaction will still record the parent transaction, 
        and mark it as failed, aborted, cancelled and so on. Example:</p>
      <p class="style2">procedure myprint (mes mylog.message%type)<br>
        is<br>
        pragma autonomous_transaction;<br>
        begin<br>
        insert into mylog (dt,message) values (to_char(sysdate, 'yyyymmdd'), mes);<br>
        commit;<br>
      end myprint;</p>
      <p>Note: the a.t. method is better than using <span class="style2">dbms_output.put_line('...')</span>, because put_line() is buffered until the enclosing transaction is ended.</p>
  <p>The following types of PL/SQL blocks can be defined as autonomous transactions:<br>
          - Stored procedures and functions.<br>
          - Local procedures and functions defined in a PL/SQL declaration block.<br>
          - Packaged procedures and functions.<br>
          - Type methods.<br>
          - Top-level anonymous blocks.</p></td>
  </tr>
</table>
<p>xxxx

<p>

</body>
</html>
